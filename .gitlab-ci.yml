variables:
  slnFile: Uoko.FireProj.sln
  csProjFile: src\Uoko.FireProj.WebSite\Uoko.FireProj.WebSite.csproj 
  iisSiteName: fire
  pkgDir: d:\deploy-pkg
  msDeployUrl: https://192.168.200.25:8172/msdeploy.axd
  publishConfiguration: ioc


before_script:
  - 'chcp 65001'

# 每次 package 包都放入缓存中，这样方便快速还原，这个维度是以 branch 为基础的  
cache:
  key: "$CI_BUILD_REF_NAME"
  paths:
    - packages/
   
stages:
  - build

execFakeScript:
  stage: build
  script:
     - ".\build.bat build.fsx"

# package:
#   stage: package
#   script:
#      - 'echo package..'
#      - c:\windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe $CsprojNameAPI /p:VisualStudioVersion=12.0 /p:DeployOnBuild=true /p:PackageLocation=$PkgDir /verbosity:m
# 
# deploy:
#   stage: deploy
#   script:
#      - 'echo deploy..'   
#      - 'cd d:\deploy-pkg'   
#      - .\Uoko.FireProj.WebSite.deploy.cmd  /Y /U:simple-deploy /P:deploy /A:Basic -allowUntrusted "-setParam:name='IIS Web Application Name',value='$SiteNameAPI'" """/M:https://192.168.200.25:8172/msdeploy.axd?site=$SiteNameAPI"
#  
